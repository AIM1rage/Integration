import operator

epsilon = 1e-6
operators = dict([('+', operator.add),
                  ('*', operator.mul),
                  ('-', operator.sub),
                  ('^', operator.pow)])
operator_priorities = dict([('+', 1), ('-', 1), ('*', 2), ('^', 3)])
brackets = dict([('(', ')'), ('[', ']')])
read_predicates = dict([('x', lambda x: x == 'x'),
                        ('operator', lambda x: x in operators.keys()),
                        ('open bracket', lambda x: x in brackets.keys()),
                        ('close bracket', lambda x: x in brackets.values())])
to_antiderivatives = [("1", "(x^2 + 4)^2",
                       [2.915117346740037e-07, 3.2082838126884476e-07,
                        3.279652247888106e-07, 3.305067864087847e-07,
                        3.3163021257567264e-07, 3.3220159409774086e-07,
                        3.3252236509244223e-07, 3.3271615721510117e-07,
                        3.328400701429889e-07, 3.329229646028325e-07]),
                      ("x^2 - 6x + 8", "x^3 + 8",
                       [0.663444958496574, 1.0589653935763268,
                        1.3416668543825125, 1.5618193856393003,
                        1.7421458224336526, 1.8948708741495288,
                        2.0273327489223694, 2.1442837614344494,
                        2.248978547712183, 2.3437439665265676]),
                      ("1", "(x^2 + 1)^2",
                       [2.916279209184553e-07, 3.209478232133514e-07,
                        3.2808504334750833e-07, 3.306266837518817e-07,
                        3.317501328860776e-07, 3.323215227002108e-07,
                        3.326422971726376e-07, 3.328360909251782e-07,
                        3.3296000468526945e-07, 3.330428996000043e-07]),
                      ("2x", "(x^2 + 1)^2",
                       [7.49906259842754e-05, 8.887901334420729e-05,
                        9.374004006215587e-05, 9.599001699983601e-05,
                        9.721223093815018e-05, 9.794918883829218e-05,
                        9.842750344130245e-05, 9.875543462282147e-05,
                        9.899000199989901e-05, 9.916355540192116e-05]),
                      ("2x + 1", "2",
                       [15050.0, 40100.0, 75150.0, 120200.0, 175250.0,
                        240300.0, 315350.0, 400400.0, 495450.0, 600500.0]),
                      ("1", "x + 1", [0.6881843912178163, 1.0919897479076164,
                                      1.3788409104653097, 1.6014855842436053,
                                      1.783474417693948, 1.9373873701933306,
                                      2.0707404302271, 2.1883847407670785,
                                      2.293634262473961, 2.3888536198814205]),
                      ("1", "x^2 - 1",
                       [0.005000291686043084, 0.006666987674240111,
                        0.007500328144981898, 0.008000330686661696,
                        0.008333665143455647, 0.008571760952944846,
                        0.008750332702292484, 0.008889221784975941,
                        0.009000333020001229, 0.009091242193805462]),
                      ("4x^4 + 8x^3 - 3*x - 3", "x^3 + 2x^2 + x",
                       [59997.252077529985, 159995.63848830995,
                        299994.49190490425, 479993.6018206069,
                        699992.8741955609, 959992.258780009,
                        1259991.7255451474, 1599991.255105976,
                        1979990.834218415, 2399990.4534314615]),
                      ("x^3 - 3", "(x - 1)(x^2 - 1)",
                       [100.70310967348912, 201.11190117010892,
                        301.4012474786084, 401.62538990490526,
                        501.8083775172486, 601.9630040190686,
                        702.0968923153908, 802.2149529648583, 902.320535585454,
                        1002.416027496663]),
                      ("x^2 - 1", "x - 1",
                       [15100.0, 40200.0, 75300.0, 120400.0, 175500.0,
                        240600.0, 315700.0, 400800.0, 495900.0, 601000.0]),
                      ("x^2 + 23", "(x + 1)(x^2 + 6x + 13)",
                       [0.6600634083308639, 1.05422265022891,
                        1.3361984349485057, 1.555900978129544,
                        1.7359213102261832, 1.8884247101898208,
                        2.0207186980436367, 2.1375381532284075,
                        2.242127076165369, 2.336805470766732]),
                      ("2x^3 - 2x^2 + 5", "(x - 1)^2 * (x^2 + 4)",
                       [1.396069154215009, 2.210291012302012,
                        2.7873072341624052, 3.234587584456993,
                        3.59989369699608, 3.90866903570303, 4.176087528554986,
                        4.4119303936637015, 4.622872943378679,
                        4.813674600427949]),
                      ("0", "1",
                       [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]),
                      ("x - 1", "x - 1",
                       [100.0, 200.0, 300.0, 400.0, 500.0, 600.0, 700.0, 800.0,
                        900.0, 1000.0]),
                      ("1", "3", [33.333333333333336, 66.66666666666667, 100.0,
                                  133.33333333333334, 166.66666666666666,
                                  200.0, 233.33333333333334, 266.6666666666667,
                                  300.0, 333.3333333333333]), ]
